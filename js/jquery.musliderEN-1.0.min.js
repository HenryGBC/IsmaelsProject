(function(i){var c=0,j=i(),b=0,h=i(),g=100,d,e={init:function(m){var o={width:880,height:400,animationtype:"horizontal",animationduration:600,animation:"manual",interval:4000},n=i(this);j=i.extend(o,m);h=n.find(".slide");b=h.length-1;return this.each(function(){h.each(function(p){i(this).attr("id","slide"+p)});h.css({width:j.width,height:j.height,top:0,left:0});f();h.not(":first").hide();h.filter(":first").toggleClass("active");n.css({width:j.width,height:j.height});if(j.animation=="auto"){i("#stop").show();i.fn.muslider("start")}else{if(j.animation=="manual"){i.fn.muslider("stop");i("#stop, #start").hide()}}i("#next").click(function(p){p.preventDefault();i.fn.muslider("next")});i("#prev").click(function(p){p.preventDefault();i.fn.muslider("prev")});i("#stop").click(function(p){p.preventDefault();i.fn.muslider("stop");i(this).hide();i("#start").show()});i("#start").click(function(p){p.preventDefault();i.fn.muslider("start");i(this).hide();i("#stop").show()})})},next:function(){var m=c;c++;if(c>b){c=0}k(m);f();a(j,m,"n");l()},prev:function(){var m=c;c--;if(c<0){c=b}k(m);f();a(j,m,"p");l()},start:function(){d=setInterval(function(){i.fn.muslider("next")},j.interval)},stop:function(){clearInterval(d)},destroy:function(){i(window).unbind(".muslider");c=0},update:function(m){var o={width:880,height:400,animationtype:"horizontal",animationduration:600,animation:"manual",interval:4000},n=i(this);j=i.extend(o,m);h.css({width:j.width,height:j.height,top:0,left:0});n.css({width:j.width,height:j.height});clearInterval(d);if(j.animation=="auto"){i("#start").hide();i("#stop").show();i.fn.muslider("start")}else{if(j.animation=="manual"){i("#stop, #start").hide()}}}};function f(){var m=i("#slide"+c).find("img");if(m.size()>0){if(m.attr("src")!=m.attr("rel")){m.attr("src",m.attr("rel"))}if(i("#slide"+c).find(".caption").size()==0&&m.attr("title")!=undefined&&m.attr("title")!=""){i("#slide"+c).append("<div class='caption'><p>"+m.attr("title")+"</p></div>");i("#slide"+c).find(".caption").css({bottom:-42}).delay(800).animate({bottom:0},300)}}}function l(){if(i("#slide"+c).find(".caption").size()>0){i("#slide"+c).find(".caption").css({bottom:-42}).delay(800).animate({bottom:0},300)}}function a(m,o,n){var q=0,p=0;if(n=="n"){q=m.width+g;p=m.height+g}else{if(n=="p"){q=-(m.width+g);p=-(m.height+g)}}switch(m.animationtype){case"horizontal":i("#slide"+c).css({left:q}).show();i("#slide"+o).animate({left:-(q)},m.animationduration,function(){i("#slide"+o).hide().toggleClass("active")});i("#slide"+c).animate({left:0},m.animationduration,function(){i(this).toggleClass("active")});break;case"vertical":i("#slide"+c).css({top:p}).show();i("#slide"+o).animate({top:-(p)},m.animationduration,function(){i("#slide"+o).hide().toggleClass("active")});i("#slide"+c).animate({top:0},m.animationduration,function(){i(this).toggleClass("active")});break;case"fade":i("#slide"+o).fadeOut(m.animationduration).toggleClass("active");i("#slide"+c).fadeIn(m.animationduration,function(){i(this).toggleClass("active")});break}}function k(m){var n,o;if(i("#slide"+m).children().is("video")){n=i("#slide"+m).find("video");if(n[0].paused===false){n[0].pause()}}if(i("#slide"+m).children().is("audio")){o=i("#slide"+m).find("audio");if(o[0].paused===false){o[0].pause()}}}i.fn.muslider=function(m){if(e[m]){return e[m].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof m==="object"||!m){return e.init.apply(this,arguments)}else{i.error("Method "+m+" does not exist on jQuery.muslider")}}}})(jQuery);